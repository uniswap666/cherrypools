(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{262:function(t,o){},263:function(t,o){},268:function(t,o){},269:function(t,o){},271:function(t,o){},272:function(t,o){},274:function(t,o){},281:function(t,o){},282:function(t,o){},287:function(t,o){},288:function(t,o){},295:function(t,o){},296:function(t,o){},297:function(t,o){},298:function(t,o){},299:function(t,o){},302:function(t,o){},303:function(t,o){},304:function(t,o){},305:function(t,o){},311:function(t,o,e){"use strict";var n=e(3),r=e(38),c=e(312),l=e(166),f=e(4),d=1..toFixed,v=Math.floor,_=function(t,o,e){return 0===o?e:o%2==1?_(t,o-1,e*t):_(t*t,o/2,e)},h=function(data,t,o){for(var e=-1,n=o;++e<6;)n+=t*data[e],data[e]=n%1e7,n=v(n/1e7)},k=function(data,t){for(var o=6,e=0;--o>=0;)e+=data[o],data[o]=v(e/t),e=e%t*1e7},m=function(data){for(var t=6,s="";--t>=0;)if(""!==s||0===t||0!==data[t]){var o=String(data[t]);s=""===s?o:s+l.call("0",7-o.length)+o}return s};n({target:"Number",proto:!0,forced:d&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!f((function(){d.call({})}))},{toFixed:function(t){var o,e,n,f,d=c(this),v=r(t),data=[0,0,0,0,0,0],w="",C="0";if(v<0||v>20)throw RangeError("Incorrect fraction digits");if(d!=d)return"NaN";if(d<=-1e21||d>=1e21)return String(d);if(d<0&&(w="-",d=-d),d>1e-21)if(e=(o=function(t){for(var o=0,e=t;e>=4096;)o+=12,e/=4096;for(;e>=2;)o+=1,e/=2;return o}(d*_(2,69,1))-69)<0?d*_(2,-o,1):d/_(2,o,1),e*=4503599627370496,(o=52-o)>0){for(h(data,0,e),n=v;n>=7;)h(data,1e7,0),n-=7;for(h(data,_(10,n,1),0),n=o-1;n>=23;)k(data,1<<23),n-=23;k(data,1<<n),h(data,1,1),k(data,2),C=m(data)}else h(data,0,e),h(data,1<<-o,0),C=m(data)+l.call("0",v);return C=v>0?w+((f=C.length)<=v?"0."+l.call("0",v-f)+C:C.slice(0,f-v)+"."+C.slice(f-v)):w+C}})},312:function(t,o,e){var n=e(37);t.exports=function(t){if("number"!=typeof t&&"Number"!=n(t))throw TypeError("Incorrect invocation");return+t}},913:function(t,o,e){"use strict";e.r(o);var n=e(7),r=(e(45),e(12),e(85),e(311),e(46),e(116)),c=e.n(r),l=e(280),f=e.n(l),d={name:"PoolItem",props:["pool_id"],computed:{pool_info:function(){return this.$store.state.singlePools[this.pool_id.toString()]},APY:function(){return 0===this.stakingTokenPrice||0===this.totalStaked||0===this.totalStaked?"0.00%":this.getPoolApr()},totalDeposit:function(){return c()(this.pool_info.totalDeposit).plus(this.pool_info.pendingReward).valueOf()}},data:function(){return{stakingTokenPrice:0,totalStaked:0,tokenPerBlock:0,BLOCKS_PER_YEAR:c()(60/1.27*60*24*365)}},mounted:function(){this.getPrice()},methods:{getPoolApr:function(){var t=this.stakingTokenPrice,o=this.$store.state.chePrice,e=this.totalStaked,n=this.tokenPerBlock,r=c()(1.27).times(n).times(o).div(e).div(t).times(100);return r.isNaN()||!r.isFinite()?"--":"0x382bB369d343125BfB2117af9c149795C6C65C50"===this.pool_info.token?r.toFixed(2)+"%":"0x8179D97Eb6488860d816e3EcAFE694a4153F216c"===this.pool_info.token?r.times(10).toFixed(2)+"%":r.div(2).toFixed(2)+"%"},getPrice:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function o(){var e,n,r,l,d,v,_;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(e=new f.a("https://exchainrpc.okex.org"),"0x382bB369d343125BfB2117af9c149795C6C65C50"!==t.pool_info.token){o.next=5;break}t.stakingTokenPrice="1.0000",o.next=10;break;case 5:return n=new e.eth.Contract(t.$store.state.abis.router,"0x865bfde337C8aFBffF144Ff4C29f9404EBb22b15"),o.next=8,n.methods.getAmountsOut(e.utils.toWei("1","ether"),[t.pool_info.token,t.$store.state.usdtAddress]).call();case 8:r=o.sent,t.stakingTokenPrice=c()(r[1]).div(1e18).toFixed(4);case 10:return l=new e.eth.Contract(t.$store.state.abis.pool,t.pool_info.cherryAddress),o.next=13,l.methods.poolInfo(0).call();case 13:if(d=o.sent,t.tokenPerBlock=d.lastRewardBlock,"0x8179D97Eb6488860d816e3EcAFE694a4153F216c"!==t.pool_info.token){o.next=21;break}return o.next=18,l.methods.totalDeposit().call();case 18:v=o.sent,o.next=25;break;case 21:return _=new e.eth.Contract(t.$store.state.abis.token,t.pool_info.token),o.next=24,_.methods.balanceOf(t.pool_info.cherryAddress).call();case 24:v=o.sent;case 25:t.totalStaked=c()(v).div(1e18).toFixed(4),setTimeout(t.getPrice,1e4);case 27:case"end":return o.stop()}}),o)})))()},showWithdrawWindow:function(){this.$store.commit("showWithdrawWindow",!0),this.$store.commit("selectPool",this.pool_id)},showDepositWindow:function(){this.$store.commit("showDepositWindow",!0),this.$store.commit("selectPool",this.pool_id)},approve:function(){var t=new(new f.a("https://exchainrpc.okex.org").eth.Contract)(this.$store.state.abis.token,this.pool_info.token),o=this;t.methods.approve(this.$store.state.factoryAddress,"115792089237316195423570985008687907853269984665640564039457584007913129639935").send({from:this.$store.state.walletAddress,gas:6e5}).on("transactionHash",(function(t){console.log("[withdrawToken]transactionHash:",t),o.showTips("info","TransactionHash: "+t)})).on("error",(function(t){console.error(t),4001===t.code||"用户取消了操作"===t?o.showTips("error","批准失败，用户主动取消操作。"):o.showTips("error","批准失败，请检查是否有足够Gas。")})).then((function(){o.showTips("success","批准成功")}),!0)},checkContract:function(){window.open("https://www.oklink.com/okexchain/address/"+this.$store.state.factoryAddress)}}},v=e(29),component=Object(v.a)(d,(function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"pool-item",attrs:{"data-pool":t.pool_id}},[e("div",{staticClass:"tit"},[e("div",{staticClass:"pic-info"},[e("img",{staticClass:"token-pic-main",attrs:{src:"/image/tokens/"+t.pool_info.tokenSymbol+".svg",alt:t.pool_info.tokenSymbol}})]),t._v(" "),e("div",[e("div",{staticClass:"main-text symbol-replace"},[t._v(t._s(t.pool_info.tokenSymbol))]),t._v(" "),e("div",{staticClass:"sub-text"},[t._v("\n        存 "+t._s(t.pool_info.tokenSymbol)+" 赚取 "+t._s(t.pool_info.tokenSymbol)+"\n      ")])])]),t._v(" "),e("div",{staticClass:"earn-info"},[e("div",{staticClass:"amount-text"},[e("div",{staticClass:"earn-amount"},[t._v(t._s(t._f("ShowTokenAmount")(t.pool_info.userProfit)))]),t._v(" "),e("div",{staticClass:"tooltip"},[t._v("未提取收益("+t._s(t.pool_info.tokenSymbol)+")")])])]),t._v(" "),e("div",{staticClass:"actions"},[t.$store.state.walletConnecting?t._e():e("div",{staticClass:"actions-item long unlock-btn",on:{click:function(o){return t.showSupportWalletWindow(!0)}}},[t._v("解锁钱包\n    ")]),t._v(" "),t.$store.state.walletConnecting&&"0"===t.pool_info.userAllowance||t.$store.state.walletConnecting&&"0"===t.pool_info.userDeposit?e("div",{staticClass:"actions-item long approve-btn",on:{click:t.approve}},[t._v("批准 "),e("span",{staticClass:"symbol-replace"},[t._v(t._s(t.pool_info.tokenSymbol))])]):t._e(),t._v(" "),t.$store.state.walletConnecting&&"0"!==t.pool_info.userDeposit?e("div",{staticClass:"actions-item withdraw-btn",on:{click:t.showWithdrawWindow}},[t._v("取回 "),e("span",{staticClass:"symbol-replace"},[t._v(t._s(t.pool_info.tokenSymbol))])]):t._e(),t._v(" "),t.$store.state.walletConnecting&&"0"!==t.pool_info.userDeposit?e("div",{staticClass:"actions-item deposit-btn",on:{click:t.showDepositWindow}},[t._v("存入 "),e("span",{staticClass:"symbol-replace"},[t._v(t._s(t.pool_info.tokenSymbol))])]):t._e()]),t._v(" "),e("div",{staticClass:"profit-info"},[e("div",{staticClass:"item"},[e("div",{staticClass:"val apr",staticStyle:{color:"#FFAF67"}},[t._v(t._s(t.APY))]),t._v(" "),e("div",{staticClass:"tit"},[t._v("年化")])]),t._v(" "),e("div",{staticClass:"item"},[e("div",{staticClass:"val my-deposit"},[t._v(t._s(t._f("ShowTokenAmount")(t.pool_info.userDeposit)))]),t._v(" "),e("div",{staticClass:"tit"},[t._v("我的质押")])])]),t._v(" "),e("div",{staticClass:"pool-info"},[e("div",{staticClass:"item"},[e("div",{staticClass:"val total_deposit"},[t._v(t._s(t._f("ShowTokenAmount")(t.totalDeposit)))]),t._v(" "),e("div",{staticClass:"tit"},[e("span",[t._v("总量")]),t._v(" "),e("div",{staticClass:"check-pool",on:{click:t.checkContract}},[t._v("在 Oklink 上查看")])])])])])}),[],!1,null,null,null);o.default=component.exports}}]);