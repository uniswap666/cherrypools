(window.webpackJsonp=window.webpackJsonp||[]).push([[11,8],{256:function(t,e,n){"use strict";var o=n(10),r=n(5),c=n(84),l=n(14),d=n(11),f=n(37),h=n(165),m=n(61),w=n(164),v=n(4),_=n(44),W=n(62).f,k=n(28).f,$=n(13).f,P=n(257).trim,C="Number",x=r.Number,I=x.prototype,A=f(_(I))==C,M=function(t){if(m(t))throw TypeError("Cannot convert a Symbol value to a number");var e,n,o,r,c,l,d,code,f=w(t,"number");if("string"==typeof f&&f.length>2)if(43===(e=(f=P(f)).charCodeAt(0))||45===e){if(88===(n=f.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(f.charCodeAt(1)){case 66:case 98:o=2,r=49;break;case 79:case 111:o=8,r=55;break;default:return+f}for(l=(c=f.slice(2)).length,d=0;d<l;d++)if((code=c.charCodeAt(d))<48||code>r)return NaN;return parseInt(c,o)}return+f};if(c(C,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var S,N=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof N&&(A?v((function(){I.valueOf.call(n)})):f(n)!=C)?h(new x(M(e)),n,N):M(e)},y=o?W(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),E=0;y.length>E;E++)d(x,S=y[E])&&!d(N,S)&&$(N,S,k(x,S));N.prototype=I,I.constructor=N,l(r,C,N)}},257:function(t,e,n){var o=n(17),r=n(8),c="["+n(258)+"]",l=RegExp("^"+c+c+"*"),d=RegExp(c+c+"*$"),f=function(t){return function(e){var n=r(o(e));return 1&t&&(n=n.replace(l,"")),2&t&&(n=n.replace(d,"")),n}};t.exports={start:f(1),end:f(2),trim:f(3)}},258:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},262:function(t,e){},263:function(t,e){},268:function(t,e){},269:function(t,e){},271:function(t,e){},272:function(t,e){},274:function(t,e){},281:function(t,e){},282:function(t,e){},287:function(t,e){},288:function(t,e){},295:function(t,e){},296:function(t,e){},297:function(t,e){},298:function(t,e){},299:function(t,e){},302:function(t,e){},303:function(t,e){},304:function(t,e){},305:function(t,e){},450:function(t,e){},475:function(t,e){},497:function(t,e){},498:function(t,e){},500:function(t,e){},506:function(t,e,n){"use strict";n.r(e);var o=n(505),r=n(501),c={name:"SupportWalletWindow",mounted:function(){this.initWalletProvider()},methods:{selectProvider:function(t){if("MetaMask"===t&&(window.MetaMask?(this.$store.commit("setWalletProvider",t),this.connectWallet()):(this.showTips("info","需要安装MetaMask"),this.installMetamask())),"WalletConnect"===t){var e=this;window.WalletConnect.enable().then((function(n){e.$store.commit("setWalletProvider",t),e.$store.commit("showSupportWalletWindow",!1),e.$store.commit("showSupportWalletWindow",!1),e.$store.commit("setWalletAddress",n[0]),console.log("wallets[0]",n[0]),e.connectWallet(n[0])})).catch((function(t){console.error(t),window.WalletConnect=new o.a({chainId:66,rpc:{66:"https://exchainrpc.okex.org"}}),e.bindProviderEvent(window.WalletConnect)}))}},connectWallet:function(t){var e=this;"MetaMask"===e.$store.state.walletProvider&&window.MetaMask.request({method:"eth_requestAccounts"}).then((function(t){e.$store.commit("setWalletAddress",t[0]),e.showTips("success","钱包连接至MetaMask"),e.$store.commit("showSupportWalletWindow",!1),e.$store.commit("showWalletInfoWindow",!1),e.$store.commit("walletConnecting",!0),e.$emit("connect")})).catch((function(t){4001===t.code?(console.log("Please connect to MetaMask."),e.showTips("error","用户主动拒绝链接钱包")):console.error(t)})),"WalletConnect"===e.$store.state.walletProvider&&t&&(e.$store.commit("setWalletAddress",t),e.showTips("success","钱包连接至WalletConnect"),e.$store.commit("showSupportWalletWindow",!1),e.$store.commit("showWalletInfoWindow",!1),e.$store.commit("walletConnecting",!0),e.$emit("connect"))},initWalletProvider:function(){window.ethereum&&window.ethereum.isMetaMask&&(window.MetaMask=window.ethereum,this.bindProviderEvent(window.MetaMask)),window.WalletConnect=new o.a({chainId:66,rpc:{66:"https://exchainrpc.okex.org"}}),this.bindProviderEvent(window.WalletConnect)},bindProviderEvent:function(t){t.on("connect",this.handleConnect),t.on("disconnect",this.handleDisconnect),t.on("accountsChanged",this.handleAccountsChanged),t.on("chainChanged",this.handleChainChanged),t.on("message",this.handleMessage)},handleConnect:function(t){console.log("handleConnect",t)},handleDisconnect:function(t){t&&console.error(t),this.$store.commit("walletConnecting",!1)},handleChainChanged:function(){console.log("[ChainChanged]",chainId),"0x42"!==this.$store.state.walletProvider.chainId&&66!==this.$store.state.walletProvider.chainId&&(showTips("warn","请切换网络至 OKExChain Mainnet"),this.$store.commit("walletConnecting",!1))},handleAccountsChanged:function(t){this.$store.state.walletProvider&&(t.length?this.$store.commit("setWalletAddress",t[0]):this.handleDisconnect())},handleMessage:function(t){console.log(t.type),console.log(t.data)},installMetamask:function(){new r.a({forwarderOrigin:"/"}).startOnboarding()}}},l=n(29),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.showSupportWalletWindow,expression:"$store.state.showSupportWalletWindow"}],attrs:{id:"SelectWallet"}},[n("div",{staticClass:"sell",on:{click:function(e){return t.showSupportWalletWindow(!1)}}}),t._v(" "),n("div",{staticClass:"content-box"},[n("div",{staticClass:"wallet-item",attrs:{id:"Metamask"},on:{click:function(e){return t.selectProvider("MetaMask")}}},[n("img",{attrs:{src:"/image/metamask.png"}}),t._v(" "),n("span",[t._v("MetaMask")])]),t._v(" "),n("div",{staticClass:"wallet-item",attrs:{id:"Walletconnect"},on:{click:function(e){return t.selectProvider("WalletConnect")}}},[n("img",{attrs:{src:"/image/walletconnect.png"}}),t._v(" "),n("span",[t._v("WalletConnect")])])])])}),[],!1,null,null,null);e.default=component.exports},911:function(t,e,n){"use strict";n.r(e);var o=n(7),r=(n(46),n(256),n(47),n(12),n(34),n(280)),c=n.n(r),l={name:"index",components:{SupportWalletWindow:n(506).default},layout:"common",data:function(){return{standard_web3:new c.a("https://exchainrpc.okex.org")}},mounted:function(){this.updatePoolInfo(),this.updatePoolAPY(),this.updateUserState(),this.updateUserTokenBalance()},methods:{updatePoolInfo:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new t.standard_web3.eth.Contract(t.$store.state.abis.factory,t.$store.state.factoryAddress),e.t0=regeneratorRuntime.keys(t.$store.state.singlePools);case 2:if((e.t1=e.t0()).done){e.next=11;break}return o=e.t1.value,e.next=6,n.methods.poolInfo(Number(o)).call();case 6:r=e.sent,c={totalDeposit:r.totalDeposit,pendingReward:r.pendingReward},t.$store.commit("updateSinglePools",{pool_id:o,update_info_val:c}),e.next=2;break;case 11:setTimeout(t.updatePoolInfo,3e3);case 12:case"end":return e.stop()}}),e)})))()},updatePoolAPY:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new t.standard_web3.eth.Contract(t.$store.state.abis.factory,t.$store.state.factoryAddress),e.t0=regeneratorRuntime.keys(t.$store.state.singlePools);case 2:if((e.t1=e.t0()).done){e.next=11;break}return o=e.t1.value,e.next=6,n.methods.statistics(Number(o)).call();case 6:r=e.sent,c={share:r.share,time:r.time},t.$store.commit("updateSinglePools",{pool_id:o,update_info_val:c}),e.next=2;break;case 11:setTimeout(t.updatePoolAPY,3e3);case 12:case"end":return e.stop()}}),e)})))()},getTokenAllowance:function(t,e,n){var r=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var c,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(r.$store.state.walletAddress){o.next=2;break}return o.abrupt("return");case 2:return c=new r.standard_web3.eth.Contract(r.$store.state.abis.token,e),o.next=5,c.methods.allowance(r.$store.state.walletAddress,r.$store.state.factoryAddress).call();case 5:if(l=o.sent,!n){o.next=10;break}n(t,l),o.next=11;break;case 10:return o.abrupt("return",l);case 11:case"end":return o.stop()}}),o)})))()},getPoolBalance:function(t,e){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,c;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(n.$store.state.walletAddress){o.next=2;break}return o.abrupt("return");case 2:return r=new n.standard_web3.eth.Contract(n.$store.state.abis.factory,n.$store.state.factoryAddress),o.next=5,r.methods.userInfo(Number(t),n.$store.state.walletAddress).call();case 5:if(c=o.sent,!e){o.next=10;break}e(t,c),o.next=11;break;case 10:return o.abrupt("return",c);case 11:case"end":return o.stop()}}),o)})))()},updateUserState:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=e.$store.state.singlePools,r=e,e.$store.state.walletAddress)for(c in o)r.getTokenAllowance(c,o[c].token,(function(t,e){r.$store.commit("updateSinglePools",{pool_id:t,update_info_val:{userAllowance:e}}),r.getPoolBalance(t,(function(t,e){console.log("userInfo",e),r.$store.commit("updateSinglePools",{pool_id:t,update_info_val:{userDeposit:e.amount,userProfit:e.pendingReward}})}))}));else for(l in o)e.$store.commit("updateSinglePools",{pool_id:l,update_info_val:{userAllowance:"0",userDeposit:"0",userProfit:"0"}});t||setTimeout(e.updateUserState,3e3);case 4:case"end":return n.stop()}}),n)})))()},updateUserTokenBalance:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,c,l,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=e.$store.state.singlePools,r=e,e.$store.state.walletAddress)for(l in c=function(t){new e.standard_web3.eth.Contract(e.$store.state.abis.token,o[t].token).methods.balanceOf(e.$store.state.walletAddress).call().then((function(e){r.$store.commit("updateSinglePools",{pool_id:t,update_info_val:{userBalance:e}})}))},o)c(l);else for(d in o)r.$store.commit("updateSinglePools",{pool_id:d,update_info_val:{userBalance:"0"}});t||setTimeout(e.updateUserTokenBalance,3e3);case 4:case"end":return n.stop()}}),n)})))()}}},d=n(29),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),n("div",{staticClass:"list"},[n("div",{staticClass:"loading",staticStyle:{display:"none"}},[n("svg",{staticStyle:{"enable-background":"new 0 0 50 50"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"60px",height:"60px",viewBox:"0 0 50 50","xml:space":"preserve"}},[n("path",{attrs:{fill:"#2C6FFF",d:"M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z",transform:"rotate(275.098 25 25)"}},[n("animateTransform",{attrs:{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"}})],1)])]),t._v(" "),n("div",{attrs:{id:"PoolList"}},[n("PoolItem",{attrs:{pool_id:0}}),t._v(" "),n("PoolItem",{attrs:{pool_id:1}}),t._v(" "),n("PoolItem",{attrs:{pool_id:2}}),t._v(" "),n("PoolItem",{attrs:{pool_id:3}})],1)]),t._v(" "),n("SupportWalletWindow",{on:{connect:function(e){return t.updateUserState(!0)}}}),t._v(" "),n("WalletFeatureWindow",{on:{disconnect:function(e){return t.updateUserState(!0)}}}),t._v(" "),n("WithdrawWindow"),t._v(" "),n("DepositWindow")],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"introduce"},[n("div",{staticClass:"row"},[n("h1",[t._v("Cherryswap挖矿复投池")]),t._v(" "),n("p",[t._v("ofarm提供Cherryswap挖矿复投池，在复投池存入虚拟币挖矿产出的收益自动复投进池内，不断累积质押数，达到更好的投资效益。")])])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{PoolItem:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(7)]).then(n.bind(null,913)).then((function(t){return t.default||t}))},SupportWalletWindow:function(){return Promise.resolve().then(n.bind(null,506)).then((function(t){return t.default||t}))},WalletFeatureWindow:function(){return Promise.all([n.e(0),n.e(14),n.e(9)]).then(n.bind(null,914)).then((function(t){return t.default||t}))},WithdrawWindow:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(10)]).then(n.bind(null,915)).then((function(t){return t.default||t}))},DepositWindow:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(6)]).then(n.bind(null,912)).then((function(t){return t.default||t}))}})}}]);