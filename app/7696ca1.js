(window.webpackJsonp=window.webpackJsonp||[]).push([[11,8],{256:function(e,t,n){"use strict";var o=n(10),r=n(5),c=n(84),l=n(14),d=n(11),f=n(37),h=n(165),m=n(61),w=n(164),v=n(4),_=n(44),W=n(62).f,$=n(28).f,x=n(13).f,P=n(257).trim,k="Number",C=r.Number,A=C.prototype,I=f(_(A))==k,M=function(e){if(m(e))throw TypeError("Cannot convert a Symbol value to a number");var t,n,o,r,c,l,d,code,f=w(e,"number");if("string"==typeof f&&f.length>2)if(43===(t=(f=P(f)).charCodeAt(0))||45===t){if(88===(n=f.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(f.charCodeAt(1)){case 66:case 98:o=2,r=49;break;case 79:case 111:o=8,r=55;break;default:return+f}for(l=(c=f.slice(2)).length,d=0;d<l;d++)if((code=c.charCodeAt(d))<48||code>r)return NaN;return parseInt(c,o)}return+f};if(c(k,!C(" 0o1")||!C("0b1")||C("+0x1"))){for(var S,N=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof N&&(I?v((function(){A.valueOf.call(n)})):f(n)!=k)?h(new C(M(t)),n,N):M(t)},E=o?W(C):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),y=0;E.length>y;y++)d(C,S=E[y])&&!d(N,S)&&x(N,S,$(C,S));N.prototype=A,A.constructor=N,l(r,k,N)}},257:function(e,t,n){var o=n(17),r=n(8),c="["+n(258)+"]",l=RegExp("^"+c+c+"*"),d=RegExp(c+c+"*$"),f=function(e){return function(t){var n=r(o(t));return 1&e&&(n=n.replace(l,"")),2&e&&(n=n.replace(d,"")),n}};e.exports={start:f(1),end:f(2),trim:f(3)}},258:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},262:function(e,t){},263:function(e,t){},268:function(e,t){},269:function(e,t){},271:function(e,t){},272:function(e,t){},274:function(e,t){},281:function(e,t){},282:function(e,t){},287:function(e,t){},288:function(e,t){},295:function(e,t){},296:function(e,t){},297:function(e,t){},298:function(e,t){},299:function(e,t){},302:function(e,t){},303:function(e,t){},304:function(e,t){},305:function(e,t){},311:function(e,t,n){"use strict";var o=n(3),r=n(38),c=n(312),l=n(166),d=n(4),f=1..toFixed,h=Math.floor,m=function(e,t,n){return 0===t?n:t%2==1?m(e,t-1,n*e):m(e*e,t/2,n)},w=function(data,e,t){for(var n=-1,o=t;++n<6;)o+=e*data[n],data[n]=o%1e7,o=h(o/1e7)},v=function(data,e){for(var t=6,n=0;--t>=0;)n+=data[t],data[t]=h(n/e),n=n%e*1e7},_=function(data){for(var e=6,s="";--e>=0;)if(""!==s||0===e||0!==data[e]){var t=String(data[e]);s=""===s?t:s+l.call("0",7-t.length)+t}return s};o({target:"Number",proto:!0,forced:f&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!d((function(){f.call({})}))},{toFixed:function(e){var t,n,o,d,f=c(this),h=r(e),data=[0,0,0,0,0,0],W="",$="0";if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(f!=f)return"NaN";if(f<=-1e21||f>=1e21)return String(f);if(f<0&&(W="-",f=-f),f>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(f*m(2,69,1))-69)<0?f*m(2,-t,1):f/m(2,t,1),n*=4503599627370496,(t=52-t)>0){for(w(data,0,n),o=h;o>=7;)w(data,1e7,0),o-=7;for(w(data,m(10,o,1),0),o=t-1;o>=23;)v(data,1<<23),o-=23;v(data,1<<o),w(data,1,1),v(data,2),$=_(data)}else w(data,0,n),w(data,1<<-t,0),$=_(data)+l.call("0",h);return $=h>0?W+((d=$.length)<=h?"0."+l.call("0",h-d)+$:$.slice(0,d-h)+"."+$.slice(d-h)):W+$}})},312:function(e,t,n){var o=n(37);e.exports=function(e){if("number"!=typeof e&&"Number"!=o(e))throw TypeError("Incorrect invocation");return+e}},452:function(e,t){},477:function(e,t){},499:function(e,t){},500:function(e,t){},502:function(e,t){},508:function(e,t,n){"use strict";n.r(t);var o=n(507),r=n(503),c={name:"SupportWalletWindow",mounted:function(){this.initWalletProvider()},methods:{selectProvider:function(e){if("MetaMask"===e&&(window.MetaMask?(this.$store.commit("setWalletProvider",e),this.connectWallet()):(this.showTips("info","需要安装MetaMask"),this.installMetamask())),"WalletConnect"===e){var t=this;window.WalletConnect.enable().then((function(n){t.$store.commit("setWalletProvider",e),t.$store.commit("showSupportWalletWindow",!1),t.$store.commit("showSupportWalletWindow",!1),t.$store.commit("setWalletAddress",n[0]),console.log("wallets[0]",n[0]),t.connectWallet(n[0])})).catch((function(e){console.error(e),window.WalletConnect=new o.a({chainId:66,rpc:{66:"https://exchainrpc.okex.org"}}),t.bindProviderEvent(window.WalletConnect)}))}},connectWallet:function(e){var t=this;"MetaMask"===t.$store.state.walletProvider&&window.MetaMask.request({method:"eth_requestAccounts"}).then((function(e){t.$store.commit("setWalletAddress",e[0]),t.showTips("success","钱包连接至MetaMask"),t.$store.commit("showSupportWalletWindow",!1),t.$store.commit("showWalletInfoWindow",!1),t.$store.commit("walletConnecting",!0),t.$emit("connect")})).catch((function(e){4001===e.code?(console.log("Please connect to MetaMask."),t.showTips("error","用户主动拒绝链接钱包")):console.error(e)})),"WalletConnect"===t.$store.state.walletProvider&&e&&(t.$store.commit("setWalletAddress",e),t.showTips("success","钱包连接至WalletConnect"),t.$store.commit("showSupportWalletWindow",!1),t.$store.commit("showWalletInfoWindow",!1),t.$store.commit("walletConnecting",!0),t.$emit("connect"))},initWalletProvider:function(){window.ethereum&&window.ethereum.isMetaMask&&(window.MetaMask=window.ethereum,this.bindProviderEvent(window.MetaMask)),window.WalletConnect=new o.a({chainId:66,rpc:{66:"https://exchainrpc.okex.org"}}),this.bindProviderEvent(window.WalletConnect)},bindProviderEvent:function(e){e.on("connect",this.handleConnect),e.on("disconnect",this.handleDisconnect),e.on("accountsChanged",this.handleAccountsChanged),e.on("chainChanged",this.handleChainChanged),e.on("message",this.handleMessage)},handleConnect:function(e){console.log("handleConnect",e)},handleDisconnect:function(e){e&&console.error(e),this.$store.commit("walletConnecting",!1)},handleChainChanged:function(){console.log("[ChainChanged]",chainId),"0x42"!==this.$store.state.walletProvider.chainId&&66!==this.$store.state.walletProvider.chainId&&(showTips("warn","请切换网络至 OKExChain Mainnet"),this.$store.commit("walletConnecting",!1))},handleAccountsChanged:function(e){this.$store.state.walletProvider&&(e.length?this.$store.commit("setWalletAddress",e[0]):this.handleDisconnect())},handleMessage:function(e){console.log(e.type),console.log(e.data)},installMetamask:function(){new r.a({forwarderOrigin:"/"}).startOnboarding()}}},l=n(29),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.showSupportWalletWindow,expression:"$store.state.showSupportWalletWindow"}],attrs:{id:"SelectWallet"}},[n("div",{staticClass:"sell",on:{click:function(t){return e.showSupportWalletWindow(!1)}}}),e._v(" "),n("div",{staticClass:"content-box"},[n("div",{staticClass:"wallet-item",attrs:{id:"Metamask"},on:{click:function(t){return e.selectProvider("MetaMask")}}},[n("img",{attrs:{src:"/image/metamask.png"}}),e._v(" "),n("span",[e._v("MetaMask")])]),e._v(" "),n("div",{staticClass:"wallet-item",attrs:{id:"Walletconnect"},on:{click:function(t){return e.selectProvider("WalletConnect")}}},[n("img",{attrs:{src:"/image/walletconnect.png"}}),e._v(" "),n("span",[e._v("WalletConnect")])])])])}),[],!1,null,null,null);t.default=component.exports},911:function(e,t,n){"use strict";n.r(t);var o=n(7),r=(n(45),n(256),n(46),n(12),n(34),n(311),n(280)),c=n.n(r),l=n(116),d=n.n(l),f={name:"index",components:{SupportWalletWindow:n(508).default},layout:"common",data:function(){return{standard_web3:new c.a("https://exchainrpc.okex.org")}},mounted:function(){this.updatePoolInfo(),this.updatePoolAPY(),this.updateUserState(),this.updateUserTokenBalance(),this.updateChePrice()},methods:{updatePoolInfo:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new e.standard_web3.eth.Contract(e.$store.state.abis.factory,e.$store.state.factoryAddress),t.t0=regeneratorRuntime.keys(e.$store.state.singlePools);case 2:if((t.t1=t.t0()).done){t.next=11;break}return o=t.t1.value,t.next=6,n.methods.poolInfo(Number(o)).call();case 6:r=t.sent,c={totalDeposit:r.totalDeposit,pendingReward:r.pendingReward},e.$store.commit("updateSinglePools",{pool_id:o,update_info_val:c}),t.next=2;break;case 11:setTimeout(e.updatePoolInfo,3e3);case 12:case"end":return t.stop()}}),t)})))()},updateChePrice:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new e.standard_web3.eth.Contract(e.$store.state.abis.router,"0x865bfde337C8aFBffF144Ff4C29f9404EBb22b15"),t.next=3,n.methods.getAmountsOut(e.standard_web3.utils.toWei("1","ether"),[e.$store.state.cheAddress,e.$store.state.usdtAddress]).call();case 3:o=t.sent,e.$store.commit("chePrice",d()(o[1]).div(1e18).toFixed(4)),setTimeout(e.updateChePrice,1e4);case 6:case"end":return t.stop()}}),t)})))()},updatePoolAPY:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new e.standard_web3.eth.Contract(e.$store.state.abis.factory,e.$store.state.factoryAddress),t.t0=regeneratorRuntime.keys(e.$store.state.singlePools);case 2:if((t.t1=t.t0()).done){t.next=11;break}return o=t.t1.value,t.next=6,n.methods.statistics(Number(o)).call();case 6:r=t.sent,c={share:r.share,time:r.time},e.$store.commit("updateSinglePools",{pool_id:o,update_info_val:c}),t.next=2;break;case 11:setTimeout(e.updatePoolAPY,3e3);case 12:case"end":return t.stop()}}),t)})))()},getTokenAllowance:function(e,t,n){var r=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var c,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(r.$store.state.walletAddress){o.next=2;break}return o.abrupt("return");case 2:return c=new r.standard_web3.eth.Contract(r.$store.state.abis.token,t),o.next=5,c.methods.allowance(r.$store.state.walletAddress,r.$store.state.factoryAddress).call();case 5:if(l=o.sent,!n){o.next=10;break}n(e,l),o.next=11;break;case 10:return o.abrupt("return",l);case 11:case"end":return o.stop()}}),o)})))()},getPoolBalance:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,c;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(n.$store.state.walletAddress){o.next=2;break}return o.abrupt("return");case 2:return r=new n.standard_web3.eth.Contract(n.$store.state.abis.factory,n.$store.state.factoryAddress),o.next=5,r.methods.userInfo(Number(e),n.$store.state.walletAddress).call();case 5:if(c=o.sent,!t){o.next=10;break}t(e,c),o.next=11;break;case 10:return o.abrupt("return",c);case 11:case"end":return o.stop()}}),o)})))()},updateUserState:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.$store.state.singlePools,r=t,t.$store.state.walletAddress)for(c in o)r.getTokenAllowance(c,o[c].token,(function(e,t){r.$store.commit("updateSinglePools",{pool_id:e,update_info_val:{userAllowance:t}}),r.getPoolBalance(e,(function(e,t){console.log("userInfo",t),r.$store.commit("updateSinglePools",{pool_id:e,update_info_val:{userDeposit:t.amount,userProfit:t.pendingReward}})}))}));else for(l in o)t.$store.commit("updateSinglePools",{pool_id:l,update_info_val:{userAllowance:"0",userDeposit:"0",userProfit:"0"}});e||setTimeout(t.updateUserState,3e3);case 4:case"end":return n.stop()}}),n)})))()},updateUserTokenBalance:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,c,l,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.$store.state.singlePools,r=t,t.$store.state.walletAddress)for(l in c=function(e){new t.standard_web3.eth.Contract(t.$store.state.abis.token,o[e].token).methods.balanceOf(t.$store.state.walletAddress).call().then((function(t){r.$store.commit("updateSinglePools",{pool_id:e,update_info_val:{userBalance:t}})}))},o)c(l);else for(d in o)r.$store.commit("updateSinglePools",{pool_id:d,update_info_val:{userBalance:"0"}});e||setTimeout(t.updateUserTokenBalance,3e3);case 4:case"end":return n.stop()}}),n)})))()}}},h=n(29),component=Object(h.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),e._v(" "),n("div",{staticClass:"list"},[n("div",{staticClass:"loading",staticStyle:{display:"none"}},[n("svg",{staticStyle:{"enable-background":"new 0 0 50 50"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"60px",height:"60px",viewBox:"0 0 50 50","xml:space":"preserve"}},[n("path",{attrs:{fill:"#2C6FFF",d:"M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z",transform:"rotate(275.098 25 25)"}},[n("animateTransform",{attrs:{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"}})],1)])]),e._v(" "),n("div",{attrs:{id:"PoolList"}},[n("PoolItem",{attrs:{pool_id:0}}),e._v(" "),n("PoolItem",{attrs:{pool_id:1}}),e._v(" "),n("PoolItem",{attrs:{pool_id:2}}),e._v(" "),n("PoolItem",{attrs:{pool_id:3}})],1)]),e._v(" "),n("SupportWalletWindow",{on:{connect:function(t){return e.updateUserState(!0)}}}),e._v(" "),n("WalletFeatureWindow",{on:{disconnect:function(t){return e.updateUserState(!0)}}}),e._v(" "),n("WithdrawWindow"),e._v(" "),n("DepositWindow")],1)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"introduce"},[n("div",{staticClass:"row"},[n("h1",[e._v("Cherryswap挖矿复投池")]),e._v(" "),n("p",[e._v("ofarm提供Cherryswap挖矿复投池，在复投池存入虚拟币挖矿产出的收益自动复投进池内，不断累积质押数，达到更好的投资效益。")])])])}],!1,null,null,null);t.default=component.exports;installComponents(component,{PoolItem:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(7)]).then(n.bind(null,913)).then((function(e){return e.default||e}))},SupportWalletWindow:function(){return Promise.resolve().then(n.bind(null,508)).then((function(e){return e.default||e}))},WalletFeatureWindow:function(){return Promise.all([n.e(0),n.e(14),n.e(9)]).then(n.bind(null,914)).then((function(e){return e.default||e}))},WithdrawWindow:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(10)]).then(n.bind(null,915)).then((function(e){return e.default||e}))},DepositWindow:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(6)]).then(n.bind(null,912)).then((function(e){return e.default||e}))}})}}]);