(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{262:function(t,e){},263:function(t,e){},268:function(t,e){},269:function(t,e){},271:function(t,e){},272:function(t,e){},274:function(t,e){},450:function(t,e){},475:function(t,e){},497:function(t,e){},498:function(t,e){},500:function(t,e){},506:function(t,e,n){"use strict";n.r(e);var o=n(505),c=n(501),l={name:"SupportWalletWindow",mounted:function(){this.initWalletProvider()},methods:{selectProvider:function(t){"MetaMask"===t&&(window.MetaMask?(this.$store.commit("setWalletProvider",t),this.connectWallet()):(this.showTips("info","需要安装MetaMask"),this.installMetamask())),"WalletConnect"===t&&window.WalletConnect.enable().then((function(e){this.$store.commit("setWalletProvider",t),this.$store.commit("showSupportWalletWindow",!1),this.connectWallet(e[0])})).catch((function(t){console.error(t),window.WalletConnect=new o.a({chainId:66,rpc:{66:"https://exchainrpc.okex.org"}}),this.bindProviderEvent(window.WalletConnect)}))},connectWallet:function(t){var e=this;"MetaMask"===e.$store.state.walletProvider&&window.MetaMask.request({method:"eth_requestAccounts"}).then((function(t){e.$store.commit("setWalletAddress",t[0]),e.showTips("success","钱包连接至MetaMask"),e.$store.commit("showSupportWalletWindow",!1),e.$store.commit("showWalletInfoWindow",!1),e.$store.commit("walletConnecting",!0),e.$emit("connect")})).catch((function(t){4001===t.code?(console.log("Please connect to MetaMask."),e.showTips("error","用户主动拒绝链接钱包")):console.error(t)})),"WalletConnect"===e.$store.state.walletProvider&&t&&(e.$store.commit("setWalletAddress",t),e.showTips("success","钱包连接至WalletConnect"),e.$store.commit("showSupportWalletWindow",!1),e.$store.commit("showWalletInfoWindow",!1),e.$store.commit("walletConnecting",!0),e.$emit("connect"))},initWalletProvider:function(){window.ethereum&&window.ethereum.isMetaMask&&(window.MetaMask=window.ethereum,this.bindProviderEvent(window.MetaMask)),window.WalletConnect=new o.a({chainId:66,rpc:{66:"https://exchainrpc.okex.org"}}),this.bindProviderEvent(window.WalletConnect)},bindProviderEvent:function(t){t.on("connect",this.handleConnect),t.on("disconnect",this.handleDisconnect),t.on("accountsChanged",this.handleAccountsChanged),t.on("chainChanged",this.handleChainChanged),t.on("message",this.handleMessage)},handleConnect:function(t){console.log("handleConnect",t)},handleDisconnect:function(t){t&&console.error(t),this.$store.commit("walletConnecting",!1)},handleChainChanged:function(){console.log("[ChainChanged]",chainId),"0x42"!==this.$store.state.walletProvider.chainId&&66!==this.$store.state.walletProvider.chainId&&(showTips("warn","请切换网络至 OKExChain Mainnet"),this.$store.commit("walletConnecting",!1))},handleAccountsChanged:function(t){this.$store.state.walletProvider&&(t.length?this.$store.commit("setWalletAddress",t[0]):this.handleDisconnect())},handleMessage:function(t){console.log(t.type),console.log(t.data)},installMetamask:function(){new c.a({forwarderOrigin:"/"}).startOnboarding()}}},r=n(29),component=Object(r.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.showSupportWalletWindow,expression:"$store.state.showSupportWalletWindow"}],attrs:{id:"SelectWallet"}},[n("div",{staticClass:"sell",on:{click:function(e){return t.showSupportWalletWindow(!1)}}}),t._v(" "),n("div",{staticClass:"content-box"},[n("div",{staticClass:"wallet-item",attrs:{id:"Metamask"},on:{click:function(e){return t.selectProvider("MetaMask")}}},[n("img",{attrs:{src:"/image/metamask.png"}}),t._v(" "),n("span",[t._v("MetaMask")])]),t._v(" "),n("div",{staticClass:"wallet-item",attrs:{id:"Walletconnect"},on:{click:function(e){return t.selectProvider("WalletConnect")}}},[n("img",{attrs:{src:"/image/walletconnect.png"}}),t._v(" "),n("span",[t._v("WalletConnect")])])])])}),[],!1,null,null,null);e.default=component.exports}}]);